#!/usr/bin/env bash

set -e

go test .

rm -rf out

function build() {
    go build -ldflags="-s -w" -o "out/$1/$2/prettyJson" .
}

build windows 386
build darwin amd64
build linux amd64

pushd out >/dev/null || :
zip -qq -r prettyJson.zip *
popd  >/dev/null || :
